function reload(t,e){$("#modalCargando").modal();var a=[],i=$("input[name=_token]").val();inputCodigo=$("#inputCodigo").val(),inputCuenta=$("#inputCuenta").val(),$.ajax({url:subfolder+"/cuentasu",headers:{"X-CSRF-TOKEN":i},type:"GET",data:{codigoFilter:inputCodigo,cuentaFilter:inputCuenta,idCentro:t},datatype:"JSON",success:function(t){$("#modalCargando").modal("hide"),null!=t.cuentas&&$.each(t.cuentas,function(t,e){item={},item.id=e.id_cuenta,item.cuenta=e.nombre_cuenta,item.name=e.presupuesto,item.porcentaje=e.porcentaje_avance,item.teorico=e.teorico,item.update=e.ultima_actualizacion,a.push(item)}),void 0===a||0==a.length?(e||setTimeout(function(){toastr.options={closeButton:!0,progressBar:!1,positionClass:"toast-top-center",showMethod:"slideDown",timeOut:4e3},toastr.success("No se encontraron registros")},1300),jQuery("#table_list_3").jqGrid("clearGridData").trigger("reloadGrid")):(setTimeout(function(){toastr.options={closeButton:!0,progressBar:!1,positionClass:"toast-top-center",showMethod:"slideDown",timeOut:4e3},e||(1==a.length&&toastr.success(t.cuentas.length+" Registro encontrado"),a.length>1&&toastr.success(t.cuentas.length+" Registros encontrados")),e&&toastr.success("Actualizacion Correcta")},1300),jQuery("#table_list_3").jqGrid("clearGridData").jqGrid("setGridParam",{data:a}).trigger("reloadGrid"))}})}function editbutton(t,e){$("#table_list_3").jqGrid("editRow",t,{keys:!0,extraparam:{idCentro:e},mtype:"GET",successfunc:function(t,a){'{"response":"success"}'==t.responseText?reload(e,!0):setTimeout(function(){toastr.options={closeButton:!0,progressBar:!1,positionClass:"toast-top-center",showMethod:"slideDown",timeOut:4e3},toastr.error("Actualizacion Fallida")},1300)}})}$(document).ready(function(){$("#modalCargando").modal();var t,e,a=[];t=$("input[name=_token]").val(),e=$("#idCentro").val(),$.ajax({url:subfolder+"/cuentasu",headers:{"X-CSRF-TOKEN":t},type:"GET",datatype:"JSON",data:{idCentro:e},success:function(t){$.each(t.cuentas,function(t,e){item={},item.id=e.id_cuenta,item.cuenta=e.nombre_cuenta,item.name=e.presupuesto,item.porcentaje=e.porcentaje_avance,item.teorico=e.teorico,item.update=e.ultima_actualizacion,a.push(item)}),$("#table_list_3").jqGrid({data:a,datatype:"local",height:330,myType:"GET",autowidth:!0,shrinkToFit:!0,rowNum:14,rowList:[10,20,30],colNames:["Código","Cuenta","Presupuesto","% de Avance Físico","% de Avance Teórico","Última actualización",""],colModel:[{name:"id",index:"id",width:80,align:"center",classes:"strong",sortable:!0},{name:"cuenta",index:"cuenta",width:140,align:"center"},{name:"name",index:"name",width:100,align:"center",formatter:"currency",formatoptions:{decimalSeparator:".",thousandsSeparator:",",decimalPlaces:2,prefix:"$"}},{name:"porcentaje",index:"porcentaje",width:120,align:"center",editable:t.fisico,formatter:"currency",formatoptions:{thousandsSeparator:",",decimalPlaces:0,suffix:"%"},editoptions:{dataInit:function(t){$(t).keypress(function(t){if(8!=t.which&&0!=t.which&&(t.which<48||t.which>57))return!1})}}},{name:"teorico",index:"teorico",width:130,align:"center",editable:t.teorico,formatter:"currency",formatoptions:{thousandsSeparator:",",decimalPlaces:0,suffix:"%"},editoptions:{dataInit:function(t){$(t).keypress(function(t){if(8!=t.which&&0!=t.which&&(t.which<48||t.which>57))return!1})}}},{name:"update",index:"update",width:130,sorttype:"date",formatter:"date",formatoptions:{srcformat:"Y-m-d H:i",newformat:"d-m-Y H:i"},align:"center"},{name:"edit",index:"edit",width:70,align:"center"}],pager:"#pager_list_3",gridComplete:function(){for(var t=$("#table_list_3").jqGrid("getDataIDs"),a=0;a<t.length;a++){var i=t[a];be='<a class="btn-primary btn-sm" style="color:white;" type="button" onclick=editbutton("'+i+'","'+e+'")>Editar</a>',$("#table_list_3").jqGrid("setRowData",t[a],{edit:be})}},editurl:subfolder+"/dataupdate",hidegrid:!1,viewrecords:!0,scrollOffset:0}),$("#modalCargando").modal("hide")}}),$(window).bind("resize",function(){var t=$(".jqGrid_wrapper").width();$("#table_list_3").setGridWidth(t)})});