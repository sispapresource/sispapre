{"version":3,"sources":["hallazgos.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"hallazgos.js","sourcesContent":["$(document).ready(function () {\n\n    $(\"#modalCargando\").modal();\n\n    var mydata = [\n    ];\n\n    var  token, url, data;\n    token = $('input[name=_token]').val();\n\n    $.ajax({\n        url: subfolder +'/hallazgos',\n        headers: {'X-CSRF-TOKEN': token},\n        type: 'GET',\n        datatype: 'JSON',\n        data: {'idCentro':$('#idCentro').val()},\n        success: function (resp) {\n            $('#modalCargando').modal('hide');\n            if(resp.hallazgos != null){\n                $('#noregister').hide();\n                $.each(resp.hallazgos, function (key, value){\n                    item = {}\n                    item [\"id\"] = value.id_hallazgo;\n                    item [\"numero_hallazgo\"] = value.numero_hallazgo;\n                    item [\"fecha\"] = value.fecha;\n                    item [\"encargado\"] = value.encargado;\n                    item [\"referencia\"] = value.referencia;\n                    item [\"documento\"] = value.documento;\n                    item [\"estado\"] = value.estado;\n                    mydata.push(item);\n                });\n\n                // Configuration for jqGrid Example 1\n                $(\"#table_list_6\").jqGrid({\n                    data: mydata,\n                    datatype: \"local\",\n                    height: 330,\n                    autowidth: true,\n                    shrinkToFit: true,\n                    rowNum: 14,\n                    rowList: [10, 20, 30],\n                    colNames: ['No. de hallazgo', 'Fecha del hallazgo', 'Inspeccionado por', 'Referencia', 'Documento', 'Estado','Opciones'],\n                    colModel: [\n                        {name: 'numero_hallazgo', index: 'numero_hallazgo', width: 140, sortable: true, align: 'center'},\n                        {name: 'fecha', index: 'fecha', width: 170, sorttype: \"date\", formatter: \"date\", formatoptions : {srcformat : 'Y-m-d H:i',newformat : 'd/m/Y'},align: 'center'},\n                        {name: 'encargado', index: 'encargado', width: 150, align: 'center'},\n                        {name: 'referencia', index: 'referencia', width: 150, align: 'center'},\n                        {name: 'documento', index: 'documento', width: 200, align: 'center'},\n                        {name: 'estado', index: 'estado', width: 100, align: 'center'},   \n                        {name: 'name', index: 'name', width: 90, align: 'center'}                    \n                    ],\n                    pager: \"#pager_list_6\",\n                    viewrecords: true,\n                    gridComplete: function() {\n                        var grid = $(\"#table_list_6\");\n                        var ids = grid.jqGrid('getDataIDs');\n                        for (var i = 0; i < ids.length; i++) {\n                            var rowId = ids[i];\n                            var checkOut = '<a data-toggle=\"modal\" class=\"btn-primary btn-sm\" style=\"color:white;\" onclick=\"loadModal('+rowId+')\">Opciones</a>';\n                            grid.jqGrid('setRowData', rowId, { name: checkOut });\n                            if(mydata[i][\"estado\"]=='subsanado')\n                                checkOut = '<span data-toggle=\"modal\" class=\"btn-primary btn-sm\" style=\"color:white; background-color:#70AD47;\"> Subsanado </span>';\n                            if(mydata[i][\"estado\"]=='subsanar')\n                                checkOut = '<span data-toggle=\"modal\" class=\"btn-primary btn-sm\" style=\"color:white; background-color:red;\">Por subsanar</span>';\n                            if(mydata[i][\"estado\"]=='anulado')\n                                checkOut = '<span data-toggle=\"modal\" class=\"btn-primary btn-sm\" style=\"color:white; background-color:#AFABAB;\">    Anulado    </span>';\n                            grid.jqGrid('setRowData', rowId, { estado: checkOut }); \n                        }\n                    },\n                    hidegrid: false,\n                    scrollOffset: 0\n                });\n            }\n        }\n    });\n\n    //Add responsive to jqGrid\n    $(window).bind('resize', function () {\n        var width = $('.jqGrid_wrapper').width();\n        $('#table_list_6').setGridWidth(width);\n    });\n});\n\nfunction loadModal(rowId){\n    var nameProject = jQuery('#table_list_6').jqGrid ('getCell', rowId, 'numero_hallazgo');\n    $('#nameProject').html('');\n    $('#nameProject').append(nameProject);\n    $(\"#editHallazgoLinkModal\").attr(\"href\", subfolder +\"#\");\n    $(\"#descargarHallazgoLinkModal\").attr(\"href\", subfolder +\"/hallazgo_descargar?idHallazgo=\"+rowId);\n    $(\"#cambiarSubsanarHallazgoLinkModal\").attr(\"href\", subfolder +\"/hallazgo_cambiar_estado?idCentro=\"+$('#idCentro').val()+\"&newEstado=subsanar&idHallazgo=\"+rowId);\n    $(\"#cambiarSubsanadoHallazgoLinkModal\").attr(\"href\", subfolder +\"/hallazgo_cambiar_estado?idCentro=\"+$('#idCentro').val()+\"&newEstado=subsanado&idHallazgo=\"+rowId);\n    $(\"#cambiarAnuladoHallazgoLinkModal\").attr(\"href\", subfolder +\"/hallazgo_cambiar_estado?idCentro=\"+$('#idCentro').val()+\"&newEstado=anulado&idHallazgo=\"+rowId);\n    $(\"#idHallazgo\").val(rowId);\n    $(\"#modal-form\").modal();\n}\n\n$(\"#cambiarEstadoHallazgoLinkModal\").click(function(){\n    $(\"#first3\").hide();\n    $(\"#last3\").show();\n});\n$('#modal-form').on('hidden.bs.modal', function () {\n    $(\"#first3\").show();\n    $(\"#last3\").hide();\n})"]}