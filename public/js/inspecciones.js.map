{"version":3,"sources":["inspecciones.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"inspecciones.js","sourcesContent":["$(document).ready(function () {\n\n    $(\"#modalCargando\").modal();\n\n    var mydata = [\n    ];\n\n    var  token, url, data;\n    token = $('input[name=_token]').val();\n\n    $.ajax({\n        url: subfolder +'/inspecciones',\n        headers: {'X-CSRF-TOKEN': token},\n        type: 'GET',\n        datatype: 'JSON',\n        data: {'idCentro':$('#idCentro').val()},\n        success: function (resp) {\n            $('#modalCargando').modal('hide');\n            if(resp.inspecciones != null){\n                $('#noregister').hide();\n                $.each(resp.inspecciones, function (key, value){\n                    item = {}\n                    item [\"id\"] = value.id_inspeccion;\n                    item [\"numero_inspeccion\"] = value.numero_inspeccion;\n                    item [\"fecha\"] = value.fecha;\n                    item [\"encargado\"] = value.encargado;\n                    item [\"puntaje\"] = value.puntaje;\n                    item [\"documento\"] = value.documento;\n                    item [\"estado\"] = value.estado;\n                    mydata.push(item);\n                });\n\n                // Configuration for jqGrid Example 1\n                $(\"#table_list_6\").jqGrid({\n                    data: mydata,\n                    datatype: \"local\",\n                    height: 330,\n                    autowidth: true,\n                    shrinkToFit: true,\n                    rowNum: 14,\n                    rowList: [10, 20, 30],\n                    colNames: ['No. de evaluación', 'Fecha de la evaluación', 'Evaluado por', 'Puntaje', 'Documento', 'Estado','Opciones'],\n                    colModel: [\n                        {name: 'numero_inspeccion', index: 'numero_inspeccion', width: 140, sortable: true, align: 'center'},\n                        {name: 'fecha', index: 'fecha', width: 170, sorttype: \"date\", formatter: \"date\", formatoptions : {srcformat : 'Y-m-d H:i',newformat : 'd/m/Y'},align: 'center'},\n                        {name: 'encargado', index: 'encargado', width: 150, align: 'center'},\n                        {name: 'puntaje', index: 'puntaje', width: 150, align: 'center',formatter:'currency', formatoptions:{thousandsSeparator: \",\", decimalPlaces: 0, suffix: \"%\"}},\n                        {name: 'documento', index: 'documento', width: 200, align: 'center'},\n                        {name: 'estado', index: 'estado', width: 90, align: 'center'},   \n                        {name: 'name', index: 'name', width: 90, align: 'center'}                    \n                    ],\n                    pager: \"#pager_list_6\",\n                    viewrecords: true,\n                    gridComplete: function() {\n                        var grid = $(\"#table_list_6\");\n                        var ids = grid.jqGrid('getDataIDs');\n                        for (var i = 0; i < ids.length; i++) {\n                            var rowId = ids[i];\n                            var checkOut = '<a data-toggle=\"modal\" class=\"btn-primary btn-sm\" style=\"color:white;\" onclick=\"loadModal('+rowId+')\">Opciones</a>';\n                            grid.jqGrid('setRowData', rowId, { name: checkOut });\n                            if(mydata[i][\"estado\"]=='revisada')\n                                checkOut = '<span data-toggle=\"modal\" class=\"btn-primary btn-sm\" style=\"color:black; background-color:#70AD47;\"> Revisada  </span>';\n                            if(mydata[i][\"estado\"]=='revision')\n                                checkOut = '<span data-toggle=\"modal\" class=\"btn-primary btn-sm\" style=\"color:black; background-color:#ED7D31;\">En revisión</span>';\n                            if(mydata[i][\"estado\"]=='anulada')\n                                checkOut = '<span data-toggle=\"modal\" class=\"btn-primary btn-sm\" style=\"color:black; background-color:#AFABAB;\">  Anulada  </span>';\n                            grid.jqGrid('setRowData', rowId, { estado: checkOut });\n                        }\n                    },\n                    hidegrid: false,\n                    scrollOffset: 0\n                });\n            }\n        }\n    });\n\n    //Add responsive to jqGrid\n    $(window).bind('resize', function () {\n        var width = $('.jqGrid_wrapper').width();\n        $('#table_list_6').setGridWidth(width);\n    });\n});\n\nfunction loadModal(rowId){\n    var nameProject = jQuery('#table_list_6').jqGrid ('getCell', rowId, 'numero_inspeccion');\n    $('#nameProject').html('');\n    $('#nameProject').append(nameProject);\n    $(\"#editInspeccionLinkModal\").attr(\"href\", subfolder +\"#\");\n    $(\"#descargarInspeccionLinkModal\").attr(\"href\", subfolder +\"/inspeccion_descargar?idInspeccion=\"+rowId);\n    $(\"#cambiarRevisionInspeccionLinkModal\").attr(\"href\", subfolder +\"/inspeccion_cambiar_estado?idCentro=\"+$('#idCentro').val()+\"&newEstado=revision&idInspeccion=\"+rowId);\n    $(\"#cambiarRevisadaInspeccionLinkModal\").attr(\"href\", subfolder +\"/inspeccion_cambiar_estado?idCentro=\"+$('#idCentro').val()+\"&newEstado=revisada&idInspeccion=\"+rowId);\n    $(\"#cambiarAnuladaInspeccionLinkModal\").attr(\"href\", subfolder +\"/inspeccion_cambiar_estado?idCentro=\"+$('#idCentro').val()+\"&newEstado=anulada&idInspeccion=\"+rowId);\n    $(\"#idInspeccion\").val(rowId);\n    $(\"#modal-form\").modal();\n}\n\n$(\"#cambiarEstadoInspeccionLinkModal\").click(function(){\n    $(\"#first3\").hide();\n    $(\"#last3\").show();\n});\n$('#modal-form').on('hidden.bs.modal', function () {\n    $(\"#first3\").show();\n    $(\"#last3\").hide();\n})\n"]}